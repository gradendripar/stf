<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.test4.stf.mapper.PostMapper">

    <resultMap id="PostList" type="com.test4.stf.domain.Post">
            <id property="id" column="id" jdbcType="BIGINT"/>
            <result property="title" column="title" jdbcType="VARCHAR"/>
            <result property="author" column="author" jdbcType="VARCHAR"/>
            <result property="content" column="content" jdbcType="VARCHAR"/>
            <result property="slug" column="slug" jdbcType="VARCHAR"/>
            <result property="tag" column="tag" jdbcType="VARCHAR"/>
            <result property="created" column="created" jdbcType="TIMESTAMP"/>
            <result property="openStatus" column="open_status" jdbcType="CHAR"/>
            <result property="verifyStatus" column="verify_status" jdbcType="CHAR"/>
    </resultMap>

    <sql id="PostListVo">id,title,author,content,slug,tag,created,open_status,verify_status</sql>

    <select id="selectPostList" resultMap="PostList">
        select
        <include refid="PostListVo"/>
        from post
        <where>
            <if test="title != null  and title != ''"> and title like concat('%', #{title}, '%')</if>
            <if test="params.beginCreated != null and params.beginCreated != '' and params.endCreated != null and params.endCreated != ''"> and created between #{params.beginCreated} and #{params.endCreated}</if>
        </where>
    </select>
    <select id="searchAllById" resultMap="PostList">
        select
        <include refid="PostListVo"/>
        from post
        where
        id = #{id,jdbcType=NUMERIC}
    </select>

</mapper>
